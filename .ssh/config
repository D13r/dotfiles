Include config_local

Host localhost
    ForwardAgent yes
    ForwardX11 yes

Host b bp beulah-penguin beulah-penguin.maths.ox.ac.uk
    Hostname beulah-penguin.maths.ox.ac.uk
    User miller
    ForwardAgent yes
    ForwardX11 yes

Host c centurion centurion.maths.ox.ac.uk
    Hostname centurion.maths.ox.ac.uk
    ForwardAgent yes
    ForwardX11 yes

Host ddp daydreamerphotos.com
    Hostname daydreamerphotos.com
    User daydream
    ForwardAgent yes

Host e edgbaston edgbaston.maths.ox.ac.uk
    Hostname edgbaston.maths.ox.ac.uk
    ForwardAgent yes
    ForwardX11 yes

Host ganeti ganeti.maths.ox.ac.uk
    Hostname ganeti.maths.ox.ac.uk

Host gate gate.maths.ox.ac.uk
    Hostname gate.maths.ox.ac.uk
    User miller
    ForwardAgent yes
    ForwardX11 yes

Host k kara kara.djm.me
    Hostname 192.168.5.2
    User dave
    ForwardAgent yes
    ForwardX11 yes

Host m maria maria.djm.me
    Hostname maria.djm.me
    User dave
    ForwardAgent yes
    ForwardX11 yes

Host mddp my.daydreamerphotos.com
    Hostname my.daydreamerphotos.com
    User mydaydre
    ForwardAgent yes

Host pi pi.djm.me
    Hostname pi.djm.me
    User pi
    ForwardAgent yes
    ForwardX11 yes

Host puppet puppet.maths.ox.ac.uk
    Hostname puppet.maths.ox.ac.uk
    ForwardAgent yes

Host tb trent-bridge trent-bridge.maths.ox.ac.uk
    Hostname trent-bridge.maths.ox.ac.uk
    ForwardAgent yes

Host www www.maths.ox.ac.uk
    ForwardAgent yes

Host *
    Compression yes
    ForwardAgent no
    ForwardX11 no
    ServerAliveInterval 15
    UpdateHostKeys yes

    # It is more common for me to be connecting as 'root' than as whatever
    # username I happen to be logged into right now, so make that the default
    User root

    # Don't hash known hosts, it doesn't really add much security since
    # most hosts are also listed in this file and/or Bash history
    HashKnownHosts no

    # Reuse connections
    ControlMaster auto
    ControlPath ~/.ssh/control-master-%r@%h:%p
    ControlPersist 10s

Match final host *.maths.ox.ac.uk !host gate.maths.ox.ac.uk !exec ~/.bin/is-maths
    ProxyJump gate
